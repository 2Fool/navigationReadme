# Centaurstech Translation Tool Readme


1. Run "npm install" to install the modules
2. Execute node app.js to run, the server is running on port 9001


# 高德后台API接入指南

[TOC]

## 一、接口请求格式

### Method

POST

### Body

JSON

### Content-Type

application/json

## 二、通用返回参数

返回状态以及返回错误码说明详情见:  
[高德错误码] : http://lbs.amap.com/api/webservice/guide/tools/info   
所有接口返回参数与高德官方文档一致
1. 地理/逆地理编码 : http://lbs.amap.com/api/webservice/guide/api/georegeo
2. 路径规划 : http://lbs.amap.com/api/webservice/guide/api/direction
3. 搜索 ： http://lbs.amap.com/api/webservice/guide/api/search
4. 交通态势 : http://lbs.amap.com/api/webservice/guide/api/trafficstatus


### 简要说明
1. status :   返回值为 0 或 1，0 表示请求失败；1 表示请求成功。
2. count :    返回结果数目
3. info :     当 status 为 0 时，info 会返回具体错误原因，否则返回“OK”。


### 返回参数样例

~~~~ json
{
    "status": "1",
    "info": "OK",
    "infocode": "10000",
    "count": "1",
}
~~~~


## 三、地理编码接口

请求URL： /map/togps

接口介绍： 将详细的结构化地址转换为高德经纬度坐标

### 请求参数
|参数名    |含义                                    |是否必填  |缺省值        |
|---------|----------------------------------------|----------|-------------|
|address  |结构化地址信息,如：北京市朝阳区阜通东大街6号|必填      |留学生创业大厦|
|city     |可选输入内容包括：指定城市的中文（如北京）、指定城市的中文全拼（beijing）、citycode（010）、adcode（110000）。当指定城市查询内容为空时，会进行全国范围内的地址转换检索。|可选     |无            |

### 请求样例

~~~~ json
{
	"address" : "白石洲地铁站",
	"city" : "深圳市"
}
~~~~

### 返回参数

![togps.png](https://github.com/2Fool/navigationReadme/blob/master/images/togps.png)  

![dilibianma.png](https://github.com/2Fool/navigationReadme/blob/master/images/togps.png)

### 返回参数样例

~~~~json
{
    "status": "1",
    "info": "OK",
    "infocode": "10000",
    "count": "1",
    "geocodes": [
        {
            "formatted_address": "广东省深圳市南山区白石洲地铁站",
            "province": "广东省",
            "citycode": "0755",
            "city": "深圳市",
            "district": "南山区",
            "township": [],
            "neighborhood": {
                "name": [],
                "type": []
            },
            "building": {
                "name": [],
                "type": []
            },
            "adcode": "440305",
            "street": [],
            "number": [],
            "location": "113.967110,22.539587",
            "level": "兴趣点"
        }
    ]
}
~~~~

## 四、逆地理编码接口

请求URL : /map/gpstoaddress  

接口介绍 : 将经纬度转换为详细结构化的地址，且返回附近周边的POI、AOI信息

### 请求参数

| 参数名  | 含义          | 规则说明                                                                                                                                   | 是否必须 | 缺省值 |
| ---------- | --------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------ |
| location   | 经纬度坐标 | 传入内容规则：经度在前，纬度在后，经纬度间以“,”分割，经纬度小数点后不要超过 6 位。                   | 必填   | 无    |
| poitype    | 返回附近POI类型 | 以下内容需要 extensions 参数为 all 时才生效。                                                                                    | 可选   | 无    |
| radius     | 搜索半径    | 0~3000，默认1000，单位：米                                                                                                             | 可选   | 1000   |
| extensions | 返回结果控制 | extensions 参数默认取值是 base，也就是返回基本地址信息；                                                                   | 可选   | base   |
| roadlevel  | 道路等级    | 以下内容需要 extensions 参数为 all 时才生效。可选值：0，1。当roadlevel=0时，显示所有道路 。当roadlevel=1时，过滤非主干道路，仅输出主干道路数据 | 可选   | 无    |

### 请求样例

~~~~ json
{
	"location" : "113.946947,22.530640",
	"extensions" : "all"
}
~~~~

### 返回参数

![nidili_1.png](/images/nidili_1.png)  
![nidili_2.png](/images/nidili_2.png)  
![nidili_3.png](/images/nidili_3.png)

### 返回参数样例

~~~~ json
{
    "status": "1",
    "info": "OK",
    "infocode": "10000",
    "regeocode": {
        "formatted_address": "广东省深圳市南山区粤海街道高新南环路",
        "addressComponent": {
            "country": "中国",
            "province": "广东省",
            "city": "深圳市",
            "citycode": "0755",
            "district": "南山区",
            "adcode": "440305",
            "township": "粤海街道",
            "towncode": "440305007000",
            "neighborhood": {
                "name": [],
                "type": []
            },
            "building": {
                "name": [],
                "type": []
            },
            "streetNumber": {
                "street": "高新南环路",
                "number": "22号",
                "location": "113.952647,22.5280611",
                "direction": "东北",
                "distance": "96.778"
            },
            "businessAreas": [
                {
                    "location": "113.94703575799998,22.542234107999988",
                    "name": "科技园",
                    "id": "440305"
                }
            ]
        },
        "pois": [
            {
                "id": "B02F30AHK4",
                "name": "中国农业银行(滨海支行)",
                "type": "金融保险服务;银行;中国农业银行",
                "tel": "0755-86166682;95599",
                "direction": "西南",
                "distance": "251.808",
                "location": "113.950600,22.525671",
                "address": "高新南十道3-5号海怡东方1层",
                "poiweight": "0.360447",
                "businessarea": "科技园"
            }
        ]
        "aois": []
    }
}
~~~~


## 五、步行路径规划

请求URL : /map/walking  

接口介绍 : 路径规划API是一套以HTTP形式提供的步行、公交、驾车查询及行驶距离计算接口，返回JSON 或 XML格式的查询数据，用于实现路径规划功能的开发。

### 请求参数

| 参数名   | 含义 | 规则说明                                                                       | 是否必须 | 缺省值 |
| ----------- | ------ | ---------------------------------------------------------------------------------- | -------- | ------ |
| origin      | 出发点 | 传入内容规则：经度在前，纬度在后，经纬度间以“,”分割，经纬度小数点后不要超过 6 位。 | 必填   | 无    |
| destination | 目的地 | 以下内容需要 extensions 参数为 all 时才生效。                        | 必填   | 无    |

### 请求参数样例

~~~~ json
{
	 "origin" :"113.967110,22.539587",
	 "destination" : "113.985261,22.538181"
}
~~~~

### 返回参数

![walking.png](/images/walking.png)  
![walk.png](/images/walk.png)

### 返回参数样例

~~~~ json 
{
    "status": "1",
    "info": "ok",
    "infocode": "10000",
    "count": "1",
    "route": {
        "origin": "113.972026367188,22.536624620226",
        "destination": "113.990218641494,22.535269097223",
        "paths": [
            {
                "distance": "2403",
                "duration": "1922",
                "steps": [
                    {
                        "instruction": "向南步行163米左转",
                        "orientation": "南",
                        "road": [],
                        "distance": "163",
                        "duration": "130",
                        "polyline": "113.971947,22.53665;113.97187,22.536453;113.971771,22.53632;113.971664,22.536089;113.971626,22.535997;113.971619,22.535833;113.971619,22.535833;113.971634,22.535505;113.971626,22.535444;113.971581,22.535349;113.971581,22.535349;113.97155,22.535257",
                        "action": "左转",
                        "assistant_action": [],
                        "walk_type": "0"
                    },
                    {
                        "instruction": "向东步行270米左转",
                        "orientation": "东",
                        "road": [],
                        "distance": "270",
                        "duration": "216",
                        "polyline": "113.971535,22.535252;113.97171,22.5352;113.971893,22.5352;113.971893,22.5352;113.972237,22.5352;113.972237,22.5352;113.972336,22.5352;113.972336,22.5352;113.972733,22.53521;113.972733,22.53521;113.973015,22.535227;113.973015,22.535227;113.973282,22.535233;113.973282,22.535233;113.973419,22.535242;113.973419,22.535242;113.973724,22.535242;113.973831,22.535191;113.973831,22.535191;113.974167,22.535133",
                        "action": "左转",
                        "assistant_action": [],
                        "walk_type": "0"
                    },
                    {
                        "instruction": "向东步行61米向右前方行走",
                        "orientation": "东",
                        "road": [],
                        "distance": "61",
                        "duration": "49",
                        "polyline": "113.974167,22.53513;113.974205,22.535187;113.974335,22.535273;113.97448,22.535311;113.974693,22.535316",
                        "action": "向右前方行走",
                        "assistant_action": [],
                        "walk_type": "0"
                    },
                    {
                        "instruction": "向东步行40米左转",
                        "orientation": "东",
                        "road": [],
                        "distance": "40",
                        "duration": "32",
                        "polyline": "113.974693,22.535316;113.97496,22.535231;113.975052,22.535187",
                        "action": "左转",
                        "assistant_action": [],
                        "walk_type": "0"
                    },
                    {
                        "instruction": "步行126米右转",
                        "orientation": [],
                        "road": [],
                        "distance": "126",
                        "duration": "101",
                        "polyline": "113.975052,22.535183;113.975494,22.535784;113.975494,22.535784;113.975609,22.535942;113.975609,22.535942;113.975731,22.536116",
                        "action": "右转",
                        "assistant_action": [],
                        "walk_type": "0"
                    },
                    {
                        "instruction": "沿深南大道向东步行23米左转",
                        "orientation": "东",
                        "road": "深南大道",
                        "distance": "23",
                        "duration": "18",
                        "polyline": "113.975731,22.536116;113.975937,22.536047",
                        "action": "左转",
                        "assistant_action": [],
                        "walk_type": "0"
                    },
                    {
                        "instruction": "步行50米右转",
                        "orientation": [],
                        "road": [],
                        "distance": "50",
                        "duration": "40",
                        "polyline": "113.975937,22.536043;113.976112,22.536463",
                        "action": "右转",
                        "assistant_action": [],
                        "walk_type": "1"
                    },
                    {
                        "instruction": "沿深南大道向东步行13米左转",
                        "orientation": "东",
                        "road": "深南大道",
                        "distance": "13",
                        "duration": "10",
                        "polyline": "113.976112,22.536463;113.976234,22.536421",
                        "action": "左转",
                        "assistant_action": [],
                        "walk_type": "0"
                    },
                    {
                        "instruction": "沿侨城西街向东步行942米直行",
                        "orientation": "东",
                        "road": "侨城西街",
                        "distance": "942",
                        "duration": "754",
                        "polyline": "113.976234,22.536415;113.976463,22.53684;113.976463,22.53684;113.976639,22.537096;113.976639,22.537096;113.976685,22.537155;113.976685,22.537155;113.976784,22.537235;113.976868,22.537277;113.977219,22.537409;113.977219,22.537409;113.977608,22.537529;113.977608,22.537529;113.978035,22.537676;113.978035,22.537676;113.978241,22.537756;113.978241,22.537756;113.978409,22.537821;113.978531,22.537842;113.978531,22.537842;113.979561,22.538202;113.979561,22.538202;113.979828,22.538288;113.980064,22.538294;113.980064,22.538294;113.980255,22.538254;113.98082,22.53804;113.980942,22.538012;113.981285,22.538002;113.981285,22.538002;113.981606,22.538006;113.981606,22.538006;113.982132,22.538036;113.982132,22.538036;113.982292,22.538027;113.982468,22.537992;113.982468,22.537992;113.982574,22.537947;113.982704,22.537851;113.983025,22.537491;113.983025,22.537491;113.98307,22.537437;113.98307,22.537437;113.983124,22.537382;113.983124,22.537382;113.983147,22.537346;113.983147,22.537346;113.983467,22.537014;113.983467,22.537014;113.983696,22.5368;113.983772,22.536758;113.983772,22.536758;113.983826,22.536732;113.984062,22.536667",
                        "action": "直行",
                        "assistant_action": [],
                        "walk_type": "0"
                    },
                    {
                        "instruction": "沿侨城东街向东步行597米向左前方行走",
                        "orientation": "东",
                        "road": "侨城东街",
                        "distance": "597",
                        "duration": "478",
                        "polyline": "113.98407,22.536663;113.984383,22.53664;113.984886,22.536617;113.984886,22.536617;113.98555,22.536598;113.98555,22.536598;113.98613,22.536579;113.98613,22.536579;113.986771,22.536558;113.986771,22.536558;113.9869,22.536552;113.9869,22.536552;113.987442,22.536533;113.987442,22.536533;113.98793,22.536507;113.98793,22.536507;113.98896,22.536461;113.98896,22.536461;113.989128,22.536442;113.989182,22.536415;113.989227,22.536356;113.989227,22.536356;113.989433,22.535818",
                        "action": "向左前方行走",
                        "assistant_action": [],
                        "walk_type": "0"
                    },
                    {
                        "instruction": "沿侨城东街向东步行77米右转",
                        "orientation": "东",
                        "road": "侨城东街",
                        "distance": "77",
                        "duration": "62",
                        "polyline": "113.989433,22.53581;113.989517,22.535711;113.989616,22.535683;113.989677,22.535669;113.990112,22.535698",
                        "action": "右转",
                        "assistant_action": [],
                        "walk_type": "0"
                    },
                    {
                        "instruction": "向南步行41米到达目的地",
                        "orientation": "南",
                        "road": [],
                        "distance": "41",
                        "duration": "33",
                        "polyline": "113.990112,22.535698;113.990135,22.535564;113.990135,22.535564;113.99015,22.535337",
                        "action": [],
                        "assistant_action": "到达目的地",
                        "walk_type": "0"
                    }
                ]
            }
        ]
    }
}
~~~~ 


## 六、公交路劲规划接口

请求URL : /map/bus

接口介绍 : 路径规划API是一套以HTTP形式提供的步行、公交、驾车查询及行驶距离计算接口，返回JSON 或 XML格式的查询数据，用于实现路径规划功能的开发。

### 请求参数

| 参数名   | 含义                    | 规则说明                                                                       | 是否必须       | 缺省值 |
| ----------- | ------------------------- | ---------------------------------------------------------------------------------- | ------------------ | ------ |
| origin      | 出发点                 | 传入内容规则：经度在前，纬度在后，经纬度间以“,”分割，经纬度小数点后不要超过 6 位。 | 必填             | 无    |
| destination | 目的地                 | 规则： lon，lat（经度，纬度）， “,”分割，经纬度小数点不超过6位 | 必填             | 无    |
| city        | 城市/跨城规划时的起点城市 | 目前支持市内公交换乘/跨城公交的起点城市。可选值：城市名称/citycode | 必填             | 无    |
| cityd       | 跨城公交规划时的终点城市 | 跨城公交规划必填参数。可选值：城市名称/citycode                 | 可选（ 跨城必填 ） | 无    |
| strategy    | 公交换乘策略        | 可选值：0：最快捷模式1：最经济模式2：最少换乘模式3：最少步行模式5：不乘地铁模式 | 可选             | 0      |
| nightflag   | 是否计算夜班车     | 可选值：0：不计算夜班车1：计算夜班车                              | 可选             | 0      |

### 请求参数样例

~~~~json
{
	 "origin" :"113.967110,22.539587",
	 "destination" : "113.985261,22.538181",
	 "city" : "深圳市"
}
~~~~

### 返回参数

![bus.png](/images/bus.png)  
![bus_walking.png](/images/bus_walking.png)  
![bus_bus.png](/images/bus_bus.png)  
![bus_exit.png](/images/bus_exit.png)  
![bus_railway.png](/images/bus_railway.png)  
![bus_train.png](/images/bus_train.png)

### 返回参数样例

~~~~ json
{
    "status": "1",
    "info": "OK",
    "infocode": "10000",
    "count": "5",
    "route": {
        "origin": "113.972026367188,22.536624620226",
        "destination": "113.990218641494,22.535269097223",
        "distance": "1831",
        "taxi_cost": "0.0",
        "transits": [
            {
                "cost": "2.0",
                "duration": "1499",
                "nightflag": "0",
                "walking_distance": "1285",
                "distance": "2537",
                "missed": "0",
                "segments": [
                    {
                        "taxi": [],
                        "walking": {
                            "origin": "113.971947,22.536650",
                            "destination": "113.974213,22.536905",
                            "distance": "637",
                            "duration": "546",
                            "steps": [
                                {
                                    "instruction": "步行163米左转",
                                    "road": [],
                                    "distance": "163",
                                    "duration": [],
                                    "polyline": "113.971947,22.536650;113.971870,22.536453;113.971764,22.536320;113.971657,22.536089;113.971626,22.535997;113.971619,22.535833;113.971634,22.535503;113.971626,22.535442;113.971581,22.535347;113.971542,22.535255",
                                    "action": "左转",
                                    "assistant_action": []
                                }
                            ]
                        },
                        "bus": {
                            "buslines": [
                                {
                                    "departure_stop": {
                                        "name": "世界之窗",
                                        "id": "440300024063017",
                                        "location": "113.974216,22.536900"
                                    },
                                    "arrival_stop": {
                                        "name": "华侨城",
                                        "id": "440300024063018",
                                        "location": "113.985369,22.533489"
                                    },
                                    "name": "地铁1号线(罗宝线)(机场东--罗湖)",
                                    "id": "440300024063",
                                    "type": "地铁线路",
                                    "distance": "1252",
                                    "duration": "398",
                                    "polyline": "113.974216,22.536900;113.975452,22.536446;113.975623,22.536383;113.975869,22.536291;113.976169,22.536175;113.976583,22.536010;113.977053,22.535826;113.977317,22.535717;113.977564,22.535607;113.977891,22.535464;113.979444,22.534757;113.980807,22.534117;113.981189,22.533949;113.981443,22.533846;113.981676,22.533764;113.981911,22.533690;113.982127,22.533634;113.982339,22.533591;113.982528,22.533560;113.982715,22.533541;113.982926,22.533525;113.983185,22.533510;113.983752,22.533498;113.984526,22.533489;113.985369,22.533489",
                                    "start_time": "0630",
                                    "end_time": "2300",
                                    "via_num": "0",
                                    "via_stops": []
                                }
                            ]
                        },
                        "entrance": {
                            "name": "H1口",
                            "location": "113.973083,22.536959"
                        },
                        "exit": {
                            "name": "A口",
                            "location": "113.986031,22.533901"
                        },
                        "railway": {
                            "spaces": []
                        }
                    },
                    {
                        "taxi": [],
                        "walking": {
                            "origin": "113.985367,22.533489",
                            "destination": "113.990166,22.535105",
                            "distance": "648",
                            "duration": "555",
                            "steps": [
                                {
                                    "instruction": "步行123米右转",
                                    "road": [],
                                    "distance": "123",
                                    "duration": [],
                                    "polyline": "113.985367,22.533489;113.985710,22.533493;113.985718,22.533901;113.986038,22.533901;113.986038,22.533993",
                                    "action": "右转",
                                    "assistant_action": []
                                }
                            ]
                        },
                        "bus": {
                            "buslines": []
                        },
                        "entrance": [],
                        "exit": [],
                        "railway": {
                            "spaces": []
                        }
                    }
                ]
            }
        ]
    }
}
~~~~

## 七、驾车路径规划接口

请求URL : /map/driving

接口介绍 : 路径规划API是一套以HTTP形式提供的步行、公交、驾车查询及行驶距离计算接口，返回JSON 或 XML格式的查询数据，用于实现路径规划功能的开发。

### 请求参数

| 参数名   | 含义                                                               | 规则说明                                                                       | 是否必须 | 缺省值 |
| ----------- | -------------------------------------------------------------------- | ---------------------------------------------------------------------------------- | -------- | ------ |
| origin      | 出发点                                                            | 传入内容规则：经度在前，纬度在后，经纬度间以“,”分割，经纬度小数点后不要超过 6 位。 | 必填   | 无    |
| destination | 目的地                                                            | 规则： lon，lat（经度，纬度）， “,”分割，经纬度小数点不超过6位 | 必填   | 无    |
| strategy    | 驾车选择策略                                                   | 详情见下                                                                       | 可选   | 0      |
| number      | 填入除省份及标点之外，车牌的字母和数字（需大写）。用于判断限行相关。 | 例如:NH1N11                                                                      | 可选   | 0      |
| avoidroad   | 避让道路名                                                      | 只支持一条避让道路                                                        | 可选   | 无    |
| province    | 用汉字填入车牌省份缩写，用于判断是否限行         | 例如：京                                                                       | 可选   | 无    |
~~~~ text
驾车策略：  
下方10~20的策略，会返回多条路径规划结果。（高德地图APP策略也包含在内，强烈建议从此策略之中选择）

下方策略 0~9的策略，仅会返回一条路径规划结果。





下方策略返回多条路径规划结果

10，返回结果会躲避拥堵，路程较短，尽量缩短时间，与高德地图的默认策略也就是不进行任何勾选一致

11，返回三个结果包含：时间最短；距离最短；躲避拥堵 （由于有更优秀的算法，建议用10代替）

12，返回的结果考虑路况，尽量躲避拥堵而规划路径，与高德地图的“躲避拥堵”策略一致

13，返回的结果不走高速，与高德地图“不走高速”策略一致

14，返回的结果尽可能规划收费较低甚至免费的路径，与高德地图“避免收费”策略一致

15，返回的结果考虑路况，尽量躲避拥堵而规划路径，并且不走高速，与高德地图的“躲避拥堵&不走高速”策略一致

16，返回的结果尽量不走高速，并且尽量规划收费较低甚至免费的路径结果，与高德地图的“避免收费&不走高速”策略一致

17，返回路径规划结果会尽量的躲避拥堵，并且规划收费较低甚至免费的路径结果，与高德地图的“躲避拥堵&避免收费”策略一致

18，返回的结果尽量躲避拥堵，规划收费较低甚至免费的路径结果，并且尽量不走高速路，与高德地图的“避免拥堵&避免收费&不走高速”策略一致

19，返回的结果会优先选择高速路，与高德地图的“高速优先”策略一致

20，返回的结果会优先考虑高速路，并且会考虑路况躲避拥堵，与高德地图的“躲避拥堵&高速优先”策略一致





下方策略仅返回一条路径规划结果

0，不考虑当时路况，返回耗时最短的路线，但是此路线不一定距离最短

1，不走收费路段，且耗时最少的路线

2，不考虑路况，仅走距离最短的路线，但是可能存在穿越小路/小区的情况

3，不走快速路，例如京通快速路（因为策略迭代，建议使用13）

4，躲避拥堵的路线，但是可能会存在绕路的情况，耗时可能较长

5，多策略（同时使用速度优先、费用优先、距离优先三个策略计算路径）。

其中必须说明，就算使用三个策略算路，会根据路况不固定的返回一~三条路径规划信息。

6，不走高速，但是不排除走其余收费路段

7，不走高速且避免所有收费路段

8，躲避收费和拥堵，可能存在走高速的情况，并且考虑路况不走拥堵路线，但有可能存在绕路和时间较长

9，不走高速且躲避收费和拥堵
~~~~
### 请求参数样例

~~~~ json
{
	 "origin" :"113.967110,22.539587",
	 "destination" : "113.985261,22.538181"
}
~~~~

### 返回参数

![driving.png](/images/driving.png)  
![driving_step.png](/images/driving_step.png)

### 返回参数样例

~~~~ json
{
    "status": "1",
    "info": "OK",
    "infocode": "10000",
    "count": "1",
    "route": {
        "origin": "113.972026367188,22.536624620226",
        "destination": "113.990218641494,22.535269097223",
        "taxi_cost": "15.424",
        "paths": [
            {
                "distance": "4260",
                "duration": "914",
                "strategy": "速度最快",
                "tolls": "0",
                "toll_distance": "0",
                "steps": [
                    {
                        "instruction": "向南行驶164米左转",
                        "orientation": "南",
                        "distance": "164",
                        "tolls": "0",
                        "toll_distance": "0",
                        "toll_road": [],
                        "duration": "118",
                        "polyline": "113.971947,22.53665;113.97187,22.536449;113.971764,22.536316;113.971664,22.536085;113.971626,22.535994;113.971619,22.535824;113.971634,22.5355;113.971626,22.535442;113.971573,22.535343;113.971535,22.535252",
                        "action": "左转",
                        "assistant_action": [],
                        "tmcs": [
                            {
                                "lcode": [],
                                "distance": "99",
                                "status": "未知",
                                "polyline": "113.971947,22.53665;113.97187,22.536449;113.971764,22.536316;113.971664,22.536085;113.971626,22.535994;113.971619,22.535824"
                            },
                            {
                                "lcode": [],
                                "distance": "54",
                                "status": "未知",
                                "polyline": "113.971619,22.535824;113.971634,22.5355;113.971626,22.535442;113.971573,22.535343"
                            },
                            {
                                "lcode": [],
                                "distance": "11",
                                "status": "未知",
                                "polyline": "113.971573,22.535343;113.971535,22.535252"
                            }
                        ],
                        "cities": [
                            {
                                "name": "深圳市",
                                "citycode": "0755",
                                "adcode": "440300",
                                "districts": [
                                    {
                                        "name": "南山区",
                                        "adcode": "440305"
                                    }
                                ]
                            }
                        ]
                    }
                        ]
                    }
                ],
                "restriction": "0",
                "traffic_lights": "6"
            }
        ]
    }
}
~~~~

## 八、骑行路径规划接口

请求URL : /map/bicycling

接口介绍 : 路径规划API是一套以HTTP形式提供的步行、公交、驾车查询及行驶距离计算接口，返回JSON 或 XML格式的查询数据，用于实现路径规划功能的开发。

### 请求参数

| 参数名   | 含义                                                               | 规则说明                                                                       | 是否必须 | 缺省值 |
| ----------- | -------------------------------------------------------------------- | ---------------------------------------------------------------------------------- | -------- | ------ |
| origin      | 出发点                                                            | 传入内容规则：经度在前，纬度在后，经纬度间以“,”分割，经纬度小数点后不要超过 6 位。 | 必填   | 无    |
| destination | 目的地                                                            | 规则： lon，lat（经度，纬度）， “,”分割，经纬度小数点不超过6位 | 必填   | 无    |

### 请求参数样例

~~~~ json 
{
	 "origin" :"113.967110,22.539587",
	 "destination" : "113.985261,22.538181"
}
~~~~

### 返回参数

![bicycling.png](/images/bicycling.png)

### 返回参数样例

~~~~ json
{
    "data": {
        "destination": "113.990218641494,22.535269097223",
        "origin": "113.972026367188,22.536624620226",
        "paths": [
            {
                "distance": 2505,
                "duration": 601,
                "steps": [
                    {
                        "action": "左转",
                        "assistant_action": "",
                        "distance": 163,
                        "duration": 39,
                        "instruction": "向南骑行163米左转",
                        "orientation": "南",
                        "polyline": "113.971947,22.53665;113.97187,22.536453;113.971771,22.53632;113.971664,22.536089;113.971626,22.535997;113.971619,22.535833;113.971619,22.535833;113.971634,22.535505;113.971626,22.535444;113.971581,22.535349;113.971581,22.535349;113.97155,22.535257",
                        "road": ""
                    }
                ]
            }
        ]
    },
    "errcode": 0,
    "errdetail": null,
    "errmsg": "OK"
}
~~~~

## 九、货车路径规划接口

请求URL : /map/truck

接口介绍 : 路径规划API是一套以HTTP形式提供的步行、公交、驾车查询及行驶距离计算接口，返回JSON 或 XML格式的查询数据，用于实现路径规划功能的开发。

### 请求参数

| 参数名   | 含义                                                               | 规则说明                                                                                          | 是否必须 | 缺省值 |
| ----------- | -------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- | -------- | ------ |
| origin      | 出发点                                                            | 传入内容规则：经度在前，纬度在后，经纬度间以“,”分割，经纬度小数点后不要超过 6 位。 | 必填   | 无    |
| destination | 目的地                                                            | 规则： lon，lat（经度，纬度）， “,”分割，经纬度小数点不超过6位           | 必填   | 无    |
| strategy    | 驾车选择策略                                                   | 详情见下                                                                                          | 可选   | 0      |
| number      | 填入除省份及标点之外，车牌的字母和数字（需大写）。用于判断限行相关。 | 例如:NH1N11                                                                                         | 可选   | 0      |
| size        | 车辆大小                                                         | 高德此分类依据国标1：微型车，2：轻型车（默认值），3：中型车，4：重型车 | 必填   | 无    |
| province    | 车牌省份                                                         | 用汉字填入车牌省份缩写。用于判断是否限行                                          | 可选   | 无    |
| height      | 车辆高度                                                         | 单位米，取值[0 – 25.5]米，默认 1.6 米，会严格按照填写数字进行限行规避，请按照车辆真实信息合理填写。 | 可选   | 1.6    |
| width       | 车辆宽度                                                         | 单位米，取值[0 – 25.5]米，默认 2.5 米，会严格按照填写数字进行限行规避，请按照车辆真实信息合理填写。 | 可选   | 2.5    |
| load        | 车辆总重                                                         | 单位吨，取值[0 – 6553.5]吨，默认 0.9 吨，会严格按照填写数字进行限行规避，请按照车辆真实信息合理填写。 | 可选   | 0.9    |
| axis        | 车辆轴数                                                         | 单位个，取值[0 –255]个，默认 2个轴，会严格按照填写数字进行限行规避，请按照车辆真实信息合理填写。 | 可选   | 2      |
| weight      | 货车核定载重                                                   | 单位吨，取值[0 – 6553.5]吨，默认 10 吨，会严格按照填写数字进行限行规避，请按照车辆真实信息合理填写。 | 可选   | 10     |

~~~~ text
驾车选择策略：
1，返回的结果考虑路况，尽量躲避拥堵而规划路径，与高德地图的“躲避拥堵”策略一致

2，返回的结果不走高速，与高德地图“不走高速”策略一致

3，返回的结果尽可能规划收费较低甚至免费的路径，与高德地图“避免收费”策略一致

4，返回的结果考虑路况，尽量躲避拥堵而规划路径，并且不走高速，与高德地图的“躲避拥堵&不走高速”策略一致

5，返回的结果尽量不走高速，并且尽量规划收费较低甚至免费的路径结果，与高德地图的“避免收费&不走高速”策略一致

6，返回路径规划结果会尽量的躲避拥堵，并且规划收费较低甚至免费的路径结果，与高德地图的“躲避拥堵&避免收费”策略一致

7，返回的结果尽量躲避拥堵，规划收费较低甚至免费的路径结果，并且尽量不走高速路，与高德地图的“避免拥堵&避免收费&不走高速”策略一致

8，返回的结果会优先选择高速路，与高德地图的“高速优先”策略一致

9，返回的结果会优先考虑高速路，并且会考虑路况躲避拥堵，与高德地图的“躲避拥堵&高速优先”策略一致
~~~~


### 请求参数样例

~~~~ json
{
	 "origin" :"113.967110,22.539587",
	 "destination" : "113.985261,22.538181",
	 "size" : "2"
}
~~~~

### 返回参数

![truck_1.png](/images/truck_1.png)  
![truck_2.png](/images/truck_2.png)
![truck_3.png](/images/truck_3.png)

### 返回参数样例

~~~~ json
{
    "data": {
        "count": 1,
        "route": {
            "destination": "113.990218641494,22.535269097223",
            "origin": "113.972026367188,22.536624620226",
            "paths": [
                {
                    "distance": 4477,
                    "duration": 958,
                    "restriction": 0,
                    "steps": [
                        {
                            "action": "左转",
                            "assistant_action": "",
                            "cities": [],
                            "distance": 164,
                            "duration": 118,
                            "instruction": "向南行驶164米左转",
                            "orientation": "南",
                            "polyline": "113.971947,22.53665;113.97187,22.536449;113.971764,22.536316;113.971664,22.536085;113.971626,22.535994;113.971619,22.535824;113.971634,22.5355;113.971626,22.535442;113.971573,22.535343;113.971535,22.535252",
                            "road": null,
                            "tmcs": [
                                {
                                    "distance": 99,
                                    "polyline": "113.971947,22.53665;113.97187,22.536449;113.971764,22.536316;113.971664,22.536085;113.971626,22.535994;113.971619,22.535824",
                                    "status": "未知"
                                },
                                {
                                    "distance": 54,
                                    "polyline": "113.971619,22.535824;113.971634,22.5355;113.971626,22.535442;113.971573,22.535343",
                                    "status": "未知"
                                },
                                {
                                    "distance": 11,
                                    "polyline": "113.971573,22.535343;113.971535,22.535252",
                                    "status": "未知"
                                }
                            ],
                            "toll_distance": 0,
                            "toll_road": "",
                            "tolls": 0
                        }
                    ],
                    "strategy": "速度最快",
                    "toll_distance": 0,
                    "tolls": 0,
                    "traffic_lights": 6
                }
            ]
        }
    },
    "errcode": 0,
    "errdetail": null,
    "errmsg": "OK"
}
~~~~

## 十、距离测量接口

请求URL : /map/distance

接口介绍 : 路径规划API是一套以HTTP形式提供的步行、公交、驾车查询及行驶距离计算接口，返回JSON 或 XML格式的查询数据，用于实现路径规划功能的开发。

### 请求参数

| 参数名   | 含义               | 规则说明                                                                               | 是否必须 | 缺省值 |
| ----------- | -------------------- | ------------------------------------------------------------------------------------------ | -------- | ------ |
| origins     | 出发点            | 公交支持20个坐标对，其余支持100个坐标对，坐标对见用“| ”分隔；经度和纬度用","分隔 | 必填   | 无    |
| destination | 目的地            | 规则： lon，lat（经度，纬度）， “,”分割，如117.500244, 40.417801     经纬度小数点不超过6位 | 必填   | 无    |
| type        | 路径计算的方式和方法 | 详情见下                                                                               | 可选   | 1      |

~~~~ text
路径计算方式：
0：直线距离

1：驾车导航距离（仅支持国内坐标）。

必须指出，当为1时会考虑路况，故在不同时间请求返回结果可能不同。

此策略和driving接口的 strategy=4策略一致

2：公交规划距离（仅支持同城坐标,QPS不可超过1，否则可能导致意外）

3：步行规划距离（仅支持5km之间的距离）
~~~~


### 请求参数样例

~~~~ json
{
	"origins" :"113.967110,22.539587",
	 "destination" : "113.985261,22.538181",
	 "type" : "0"
}
~~~~


### 返回参数

![distance.png](/images/distance.png)

### 返回参数样例

~~~~json
{
    "status": "1",
    "info": "OK",
    "infocode": "10000",
    "results": [
        {
            "origin_id": "1",
            "dest_id": "1",
            "distance": "1876",
            "duration": "0"
        }
    ]
}
~~~~

## 十一、关键字搜索接口

请求URL ： /map/searchkeywords

接口介绍 ： 通过用POI的关键字进行条件搜索，例如：肯德基、朝阳公园等；同时支持设置POI类型搜索，例如：银行

### 请求参数

| 参数名 | 含义             | 规则说明                                                                                                                           | 是否必须                          | 缺省值            |
| --------- | ------------------ | -------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- | -------------------- |
| keywords  | 查询关键字    | 规则： 多个关键字用“|”分割，若不指定city，并且搜索的为泛词（例如“美食”）的情况下，返回的内容为城市列表以及此城市内有多少结果符合要求。 | 必填(keywords和types两者至少必选其一) | 无                  |
| city      | 查询城市       | 可选值：城市中文、中文全拼、citycode、adcode                                                                            | 可选                                | 无（全国范围内搜索） |
| citylimit | 仅返回指定城市数据 | 可选值：true/false                                                                                                                 | 可选                                | false                |
| types     | 查询POI类型    | 详情见下                                                                                                                           | 必填(keywords和types两者至少必选其一) | 1                    |

### 请求参数样例

~~~~ json
{
	 "keywords" :"留学生创业大厦",
	 "city" : "深圳市"
}
~~~~
### 返回参数

![searchwords_1.png](/images/searchwords_1.png)
![searchwords_2.png](/images/searchwords_2.png)
![searchwords_3.png](/images/searchwords_3.png)

### 返回参数样例

~~~~json
{
    "status": "1",
    "count": "138",
    "info": "OK",
    "infocode": "10000",
    "suggestion": {
        "keywords": [],
        "cities": []
    },
    "pois": [
        {
            "id": "B02F37TR62",
            "name": "留学生创业大厦",
            "type": "商务住宅;楼宇;商务写字楼",
            "typecode": "120201",
            "biz_type": [],
            "address": "高新南环路29号",
            "location": "113.946918,22.530646",
            "tel": [],
            "distance": [],
            "biz_ext": {
                "rating": [],
                "cost": []
            },
            "pname": "广东省",
            "cityname": "深圳市",
            "adname": "南山区",
            "importance": [],
            "shopid": [],
            "shopinfo": "0",
            "poiweight": []
        }
    ]
}
~~~~

## 十二、周边搜索接口

请求URL ： /map/searcharound

接口介绍 ： 在用户传入经纬度坐标点附近，在设定的范围内，按照关键字或POI类型搜索

### 请求参数
| 参数名 | 含义      | 规则说明                                                              | 是否必须 | 缺省值            |
| -------- | ----------- | ------------------------------------------------------------------------- | -------- | -------------------- |
| location | 中心点坐标 | 规则： 经度和纬度用","分割，经度在前，纬度在后，经纬度小数点后不得超过6位 | 必填   | 无                  |
| keywords | 查询关键字 | 规则： 多个关键字用“|”分割                                 | 可选   | 无                  |
| radius   | 查询半径 | 取值范围:0-50000。规则：大于50000按默认值，单位：米    | 可选   | 3000                 |
| sortrule | 排序规则 | 规定返回结果的排序规则。按距离排序：distance；综合排序：weight | 可选   | distance             |
| city     | 查询城市 | 可选值：城市中文、中文全拼、citycode、adcode               | 可选   | 无（全国范围内搜索） |
| types    | 查询POI类型 | 详情见下                                                              | 可选   | 1                    |

~~~~ json 
POI规则详情:
多个类型用“|”分割；

可选值：分类代码 或 汉字 （若用汉字，请严格按照附件之中的汉字填写） 

分类代码由六位数字组成，一共分为三个部分，前两个数字代表大类；中间两个数字代表中类；最后两个数字代表小类。

若指定了某个大类，则所属的中类、小类都会被显示。

例如：010000为汽车服务（大类）

             010100为加油站（中类）

                010101为中国石化（小类）

             010900为汽车租赁（中类）

                010901为汽车租赁还车（小类）

当指定010000，则010100等中类、010101等小类都会被包含。

当指定010900，则010901等小类都会被包含

下载POI分类编码和城市编码表         



当keywords和types均为空的时候，默认指定types为050000（餐饮服务）、070000（生活服务）、120000（商务住宅）
~~~~

### 请求参数样例

~~~~ json
{
	"location" :"113.967110,22.539587",
	"keywords" : "咖啡厅"
}
~~~~

### 返回参数

![searchwords_1.png](/images/searchwords_1.png)
![searchwords_2.png](/images/searchwords_2.png)
![searchwords_3.png](/images/searchwords_3.png)

## 十三、圆形区域交通态势接口

请求URL ： /map/status/circle

接口介绍 ： 提供根据用户输入的内容能够返回希望查询的交通态势情况。  

目前支持城市 ： 北京，上海，广州，深圳，宁波，武汉，重庆，成都，沈阳，南京，杭州，长春，常州，大连，东莞，福州，青岛，石家庄，天津，太原，西安，无锡，厦门，珠海，长沙，苏州，金华，佛山，济南，泉州，嘉兴，西宁，惠州，温州，中山，合肥，乌鲁木齐，台州，绍兴，昆明。

### 请求参数

| 参数名  | 含义       | 规则说明                                                                                                                                                                      | 是否必须 | 缺省值 |
| ---------- | ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------ |
| location   | 中心点坐标 | 规则： 经度和纬度用","分割，经度在前，纬度在后，经纬度小数点后不得超过6位                                                                       | 必填   | 无    |
| level      | 道路等级 | 指定道路等级，下面各值代表的含义：1：高速（京藏高速）2：城市快速路、国道(西三环、103国道)3：高速辅路（G6辅路）4：主要道路（长安街、三环辅路路）5：一般道路（彩和坊路）6：无名道路 | 可选   | 5      |
| radius     | 查询半径 | 单位：米，最大取值5000米。                                                                                                                                             | 可选   | 1000   |
| extensions | 返回结果控制 | 可选值：base,all                                                                                                                                                              | 可选   | base   |

### 请求参数样例

~~~~ json 
{
	"location" :"113.967110,22.539587"
}
~~~~

### 返回参数

![status.png](/images/status.png)

### 返回参数样例

~~~~ json
{
    "status": "1",
    "info": "OK",
    "infocode": "10000",
    "trafficinfo": {
        "description": "石洲中路：自南向北缓慢，反向畅通；兴隆西街：自西向东缓慢，反向畅通；石洲北路：自西向东缓慢，反向畅通。",
        "evaluation": {
            "expedite": "84.38%",
            "congested": "15.63%",
            "blocked": "0.00%",
            "unknown": "0.01%",
            "status": "2",
            "description": "轻度拥堵"
        }
    }
}
~~~~

## 十四、指定路线交通态势接口

请求URL ： /map/status/road

接口介绍 ： 提供根据用户输入的内容能够返回希望查询的交通态势情况。  

目前支持城市 ： 北京，上海，广州，深圳，宁波，武汉，重庆，成都，沈阳，南京，杭州，长春，常州，大连，东莞，福州，青岛，石家庄，天津，太原，西安，无锡，厦门，珠海，长沙，苏州，金华，佛山，济南，泉州，嘉兴，西宁，惠州，温州，中山，合肥，乌鲁木齐，台州，绍兴，昆明。

### 请求参数

| 参数名  | 含义       | 规则说明                                                                                                                                                                      | 是否必须                   | 缺省值 |
| ---------- | ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ | ------ |
| name       | 道路名    | 规则： 经度和纬度用","分割，经度在前，纬度在后，经纬度小数点后不得超过6位                                                                       | 必填                         | 无    |
| level      | 道路等级 | 指定道路等级，下面各值代表的含义：1：高速（京藏高速）2：城市快速路、国道(西三环、103国道)3：高速辅路（G6辅路）4：主要道路（长安街、三环辅路路）5：一般道路（彩和坊路）6：无名道路 | 可选                         | 5      |
| adcode     | 城市编码 | 建议使用adcode                                                                                                                                                                | 非必填（city和adcode必填一个） | 无    |
| extensions | 返回结果控制 | 可选值：base,all                                                                                                                                                              | 可选                         | base   |
| city       | 城市名    | 建议使用adcode                                                                                                                                                                | 非必填（city和adcode必填一个） | 无    |

### 请求参数样例

~~~~ json
{
	"name" : "深南大道",
	"city" : "深圳市"
}
~~~~

### 返回参数

![status.png](/images/status.png)

### 返回参数样例

~~~~ json
{
    "status": "1",
    "info": "OK",
    "infocode": "10000",
    "trafficinfo": {
        "description": "深南大道：双向畅通。",
        "evaluation": {
            "expedite": "94.52%",
            "congested": "4.49%",
            "blocked": "0.99%",
            "unknown": "0.00%",
            "status": "2",
            "description": "基本畅通"
        }
    }
}
~~~~

## 十五、坐标转换接口

请求URL ： /map/togeogps  

接口介绍 ： 为了使用高德服务，用户需要将非高德坐标转换为高德坐标。  

### 请求参数 
![togeogps_1.png](/images/togeogps_1.png)  
请求参数可以使用";"分隔多个坐标

### 请求参数样例

~~~~json 
{
	"location": "113.967048,22.539604;113.967048,22.539204;113.967048,22.5396064",
	"coordsysy" : "gps"
}
~~~~

### 返回参数
![togeogps_2.png](/images/togeogps_2.png)
返回参数中，";"已被转换为"|"

### 返回参数样例
~~~~json
{
    "status": "1",
    "info": "ok",
    "infocode": "10000",
    "locations": "113.971964246962,22.53664171007|113.971964246962,22.536241319445|113.971964246962,22.536644151476"
}
~~~~
